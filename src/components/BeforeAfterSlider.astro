---
import "beerslider/dist/BeerSlider.css";
import { Picture, BackgroundPicture } from "astro-imagetools/components";
const portfolioPath = "src/images/portfolio";
---

<div class="container1 w-96 h-64">
  <div id="comparison">
    <div id="uli">
      <Picture
        alt=""
        src={`/${portfolioPath}/MU2_7828.png`}
        breakpoints={{ count: 8, minWidth: 320, maxWidth: 1920 }}
        sizes="100vw"
      />
      <div id="handle"></div>
      <div id="divisor">
        <div class="w-96">
          <Picture
            src={`/${portfolioPath}/MU2_8235.png`}
            alt=""
            breakpoints={{ count: 8, minWidth: 320, maxWidth: 1920 }}
            sizes="(min-width: 640px) 50vw, 100vw"
          />
        </div>
      </div>
      <input type="range" min="0" max="100" value="50" id="slider" />
    </div>
  </div>
</div>

<script>
  var divisor = document.getElementById("divisor"),
    handle = document.getElementById("handle"),
    slider = document.getElementById("slider") as HTMLInputElement;
  document.getElementById("slider").addEventListener("input", function () {
    moveDivisor();
  });

  function moveDivisor() {
    handle.style.left = slider.value + "%";
    divisor.style.width = slider.value + "%";
  }

  window.onload = function () {
    moveDivisor();
  };
</script>

<style>
  .container1 {
    max-width: 800px;
  }

  #comparison {
    width: 100%;
    padding-bottom: 100%;
    overflow: hidden;
    position: relative;
  }

  #uli {
    /*   position: absolute;
  background-image: url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/4273/photoshop-face-before.jpg); */
    position: absolute;
    background-size: cover;
    font-size: 0;
    width: 100%;
    margin: 0;
  }

  #divisor {
    /*  background-image: url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/4273/photoshop-face-after.jpg); */
    background-size: cover;
    position: absolute;
    width: 50%;
    box-shadow: 0 5px 10px -2px rgba(0, 0, 0, 0.3);
    bottom: 0;
    height: 100%;
    overflow: hidden;
  }
  #divisor::before,
  #divisor::after {
    content: "";
    position: absolute;
    right: -2px;
    width: 4px;
    height: calc(50% - 25px);
    background: white;
    z-index: 3;
  }
  #divisor::before {
    top: 0;
    box-shadow: 0 -3px 8px 1px rgba(0, 0, 0, 0.3);
  }
  #divisor::after {
    bottom: 0;
    box-shadow: 0 3px 8px 1px rgba(0, 0, 0, 0.3);
  }

  #handle {
    position: absolute;
    height: 50px;
    width: 50px;
    top: 50%;
    left: 50%;
    transform: translateY(-50%) translateX(-50%);
    z-index: 2;
  }
  #handle::before,
  #handle::after {
    content: "";
    width: 0;
    height: 0;
    border: 6px inset transparent;
    position: absolute;
    top: 50%;
    margin-top: -6px;
  }
  #handle::before {
    border-right: 6px solid white;
    left: 50%;
    margin-left: -17px;
  }
  #handle::after {
    border-left: 6px solid white;
    right: 50%;
    margin-right: -17px;
  }

  input[type="range"] {
    -webkit-appearance: none;
    -moz-appearance: none;
    position: absolute;
    top: 50%;
    left: -25px;
    transform: translateY(-50%);
    background-color: transparent;
    width: calc(100% + 50px);
    z-index: 2;
  }
  input[type="range"]:focus,
  input[type="range"]:active {
    border: none;
    outline: none;
  }

  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    border: none;
    height: 50px;
    width: 50px;
    border-radius: 50%;
    background: transparent;
    border: 4px solid white;
    box-shadow: 0 0 8px 1px rgba(0, 0, 0, 0.3);
  }

  input[type="range"]::-moz-range-track {
    -moz-appearance: none;
    height: 15px;
    width: 100%;
    background-color: transparent;
    position: relative;
    outline: none;
  }
</style>
